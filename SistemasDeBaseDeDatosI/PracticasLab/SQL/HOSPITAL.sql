-- Practica #11: Hospital
-- Materia: Sistemas De Base De Datos
-- Alumno: Cristian Omar Alvarado Rodriguez

-- Tabla PACIENTE
CREATE TABLE PACIENTE_COAR(
    ID_PACIENTE NUMBER(5) CONSTRAINT PACIENTE_COAR_PK PRIMARY KEY,
    APATERNO VARCHAR2(50) CONSTRAINT PACI_COAR_APA_NN NOT NULL,
    AMATERNO VARCHAR2(50),
    NOMBRE VARCHAR2(50) CONSTRAINT PACI_COAR_NOM_NN NOT NULL,
    FECHA_NAC DATE CONSTRAINT PACI_COAR_FEC_NN NOT NULL,
    EDAD NUMBER(3) CONSTRAINT PACI_COAR_EDA_NN NOT NULL,
    SEXO CHAR(1) CONSTRAINT PACI_COAR_SEX_NN NOT NULL CONSTRAINT PACI_COAR_SEX_CK CHECK (SEXO IN ('F','M')),
    TELEFONO VARCHAR2(10) CONSTRAINT PACI_COAR_TEL_NN NOT NULL
);

SELECT * FROM PACIENTE_COAR;

-- Insertar datos en la tabla PACIENTE_COAR
INSERT INTO PACIENTE_COAR VALUES(1, 'LOPEZ', 'RODRIGUEZ', 'JUAN', '23/04/1993', 29, 'M', '4828374636');
INSERT INTO PACIENTE_COAR VALUES(2, 'GARCIA', 'PEREZ', 'ANA', '17/07/1999', 23, 'F', '4924678673');
INSERT INTO PACIENTE_COAR VALUES(3, 'TORRES', 'MARTINEZ', 'MARIA', '08/02/1995', 27, 'F', '9743475375');
INSERT INTO PACIENTE_COAR VALUES(4, 'RUIZ', 'RAMIREZ', 'PEDRO', '21/09/2000', 22, 'M', '4237852045');
INSERT INTO PACIENTE_COAR VALUES(5, 'ALVARADO', 'DIAZ', 'JOSE', '15/05/2002', 19, 'M', '9743475377');

COMMIT;

-- Tabla ASISTENTE
CREATE TABLE ASISTENTE_COAR(
    ID_ASISTENTE NUMBER(5) CONSTRAINT ASISTENTE_COAR_PK PRIMARY KEY,
    APATERNO VARCHAR2(50) CONSTRAINT ASIS_COAR_APA_NN NOT NULL,
    AMATERNO VARCHAR2(50),
    NOMBRE VARCHAR2(50) CONSTRAINT ASIS_COAR_NOM_NN NOT NULL,
    EMAIL VARCHAR2(50) CONSTRAINT ASIS_COAR_EMA_NN NOT NULL,
    TELEFONO VARCHAR2(10) CONSTRAINT ASIS_COAR_TEL_NN NOT NULL
);


SELECT * FROM ASISTENTE_COAR;

-- Insertar datos en la tabla ASISTENTE_COAR
INSERT INTO ASISTENTE_COAR VALUES(1, 'RODRIGUEZ', 'MARTINEZ', 'PEDRO', 'PEDRO@GMAIL.COM', '4929246455');
INSERT INTO ASISTENTE_COAR VALUES(2, 'GARCIA', 'VALDEZ', 'CARMEN', 'CAR34@GMAIL.COM', '4929240274');
INSERT INTO ASISTENTE_COAR VALUES(3, 'FLORES', 'LOPEZ', 'CRISTIAN', 'CRIS@GMAIL.COM', '4929246900');
INSERT INTO ASISTENTE_COAR VALUES(4, 'DIAZ', 'PEREZ', 'MARIA', 'MARIA@GMAIL.COM', '4929269183');
INSERT INTO ASISTENTE_COAR VALUES(5, 'TORRES', 'RUIZ', 'ANA', 'ANA@HOTMAIL.COM', '4923079055');

COMMIT;

-- Tabla de relacion CITA_COAR
CREATE TABLE CITA_COAR(
    ID_PACIENTE NUMBER(5),
    ID_ASISTENTE NUMBER(5),
    FOLIO_CITA CHAR(8),
    FECHA_HORA DATE CONSTRAINT CITA_COAR_FEC_NN NOT NULL,
    DESCRIPCION VARCHAR2(100) CONSTRAINT CITA_COAR_DES_NN NOT NULL,
    CONSTRAINT CITA_COAR_PK PRIMARY KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA),
    CONSTRAINT PACICOAR_CITA_COAR_FK FOREIGN KEY (ID_PACIENTE) REFERENCES PACIENTE_COAR (ID_PACIENTE),
    CONSTRAINT ASISCOAR_CITA_COAR_FK FOREIGN KEY (ID_ASISTENTE) REFERENCES ASISTENTE_COAR (ID_ASISTENTE)
);

SELECT * FROM CITA_COAR;

-- Insertar datos en la tabla CITA_COAR
INSERT INTO CITA_COAR VALUES(3,2,'00000001',TO_DATE('4/9/2022 12:30:00 AM','DD/MM/YYYY HH:MI:SS AM'),'CITA POR RESFRIADO');
INSERT INTO CITA_COAR VALUES(2,2,'00000002',TO_DATE('20/02/2022 12:00:00 AM','DD/MM/YYYY HH:MI:SS AM'),'DOLOR DE ARTICULACIONES');
INSERT INTO CITA_COAR VALUES(1,3,'00000003',TO_DATE('02/05/2022 11:30:00 AM','DD/MM/YYYY HH:MI:SS AM'),'DOLOR DE CABEZA');
INSERT INTO CITA_COAR VALUES(5,4,'00000004',TO_DATE('30/04/2022 10:30:00 AM','DD/MM/YYYY HH:MI:SS AM'),'PROBLEMAS DE HIPERTENSION');
INSERT INTO CITA_COAR VALUES(4,1,'00000005',TO_DATE('28/04/2022 09:30:00 AM','DD/MM/YYYY HH:MI:SS AM'),'PROBLEMAS DE DIABETES');

COMMIT;

-- Tabla CONSULTORIO_COAR
CREATE TABLE CONSULTORIO_COAR(
    ID_CONSULTORIO NUMBER(2) CONSTRAINT CONSULTORIO_COAR_PK PRIMARY KEY,
    UBICACION VARCHAR2(50) CONSTRAINT CONSULTORIO_COAR_UBI_NN NOT NULL,
    DESCRIPCION VARCHAR2(100) CONSTRAINT CONSULTORIO_COAR_DES_NN NOT NULL
);

SELECT * FROM CONSULTORIO_COAR;

-- Insertar datos en la tabla CONSULTORIO_COAR
INSERT INTO CONSULTORIO_COAR VALUES(1,'CARDIOLOGIA','CONSULTORIO DE CARDIOLOGIA');
INSERT INTO CONSULTORIO_COAR VALUES(2,'ONCOLOGIA','CONSULTORIO DE ONCOLOGIA');
INSERT INTO CONSULTORIO_COAR VALUES(3,'UROLOGIA','CONSULTORIO DE UROLOGIA');
INSERT INTO CONSULTORIO_COAR VALUES(4,'NEUROLOGIA','CONSULTORIO DE NEUROLOGIA');
INSERT INTO CONSULTORIO_COAR VALUES(5,'GINECOLOGIA','CONSULTORIO DE GINECOLOGIA');

COMMIT;

-- Tabla MEDICO_COAR
CREATE TABLE MEDICO_COAR(
    ID_MEDICO NUMBER(5) CONSTRAINT MEDICO_COAR_PK PRIMARY KEY,
    APATERNO VARCHAR2(50) CONSTRAINT MEDICO_COAR_APA_NN NOT NULL,
    AMATERNO VARCHAR2(50),
    NOMBRE VARCHAR2(50) CONSTRAINT MEDICO_COAR_NOM_NN NOT NULL,
    ESPECIALIDAD VARCHAR2(100) CONSTRAINT MEDICO_COAR_ESP_NN NOT NULL,
    EMAIL VARCHAR2(50) CONSTRAINT MEDICO_COAR_EMA_NN NOT NULL,
    TELEFONO VARCHAR2(10) CONSTRAINT MEDICO_COAR_TEL_NN NOT NULL
);

SELECT * FROM MEDICO_COAR;

-- Insertar datos en la tabla MEDICO_COAR
INSERT INTO MEDICO_COAR VALUES(1,'BECERRA','LAGUNA', 'CARLOS', 'CARDIOLOGO', 'CARLOS@GMAIL.COM', '4925674568');
INSERT INTO MEDICO_COAR VALUES(2,'VARGAS', 'LARES', 'JOSE', 'GASTROENTEROLOGO', 'JOSE@GMAIL.COM', '4828374636');
INSERT INTO MEDICO_COAR VALUES(3,'GAITAN', 'ORTIZ', 'GUSTAVO', 'ODONTOLOGO', 'GUS@HOTMAIL.COM', '4924678673');
INSERT INTO MEDICO_COAR VALUES(4,'VERA', 'SOTO', 'HECTOR', 'PEDIATRA', 'HEC@GMAIL.COM', '4929246900');
INSERT INTO MEDICO_COAR VALUES(5,'CERON', 'GARCIA', 'EDGAR', 'MEDICO GENERAL', 'HECTOR@GMAIL.COM', '4926737459');

COMMIT;

-- Tabla TIPO_CONSULTA_COAR
CREATE TABLE TIPO_CONSULTA_COAR(
    ID_TIPO_CONSULTA NUMBER(2) CONSTRAINT TIPO_CONSULTA_COAR_PK PRIMARY KEY,
    DESCRIPCION VARCHAR2(100) CONSTRAINT TIPO_CONSULTA_COAR_DES_NN NOT NULL
);

SELECT * FROM TIPO_CONSULTA_COAR;

-- Insertar datos en la tabla TIPO_CONSULTA_COAR
INSERT INTO TIPO_CONSULTA_COAR VALUES(1,'CONSULTA GENERAL');
INSERT INTO TIPO_CONSULTA_COAR VALUES(2,'CONSULTA POR RESFRIADO');
INSERT INTO TIPO_CONSULTA_COAR VALUES(3,'CONSULTA POR DOLOR DE CABEZA');
INSERT INTO TIPO_CONSULTA_COAR VALUES(4,'CONSULTA POR DOLOR DE ARTICULACIONES');
INSERT INTO TIPO_CONSULTA_COAR VALUES(5,'CONSULTA POR PROBLEMAS DE HIPERTENSION');

COMMIT;

-- Tabla de relacion CONSULTA_COAR
CREATE TABLE CONSULTA_COAR(
    ID_PACIENTE NUMBER(5),
    ID_ASISTENTE NUMBER(5),
    FOLIO_CITA CHAR(8),
    ID_MEDICO NUMBER(5),
    ID_CONSULTORIO NUMBER(2),
    ID_TIPO_CONSULTA NUMBER(2),
    FOLIO_CONSULTA CHAR(8),
    FECHA DATE CONSTRAINT CONSULTA_COAR_FEC_NN NOT NULL,
    CONSTRAINT CONSULTA_COAR_PK PRIMARY KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                            ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA),
    CONSTRAINT CITA_CONSULTA_COAR_FK FOREIGN KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA) 
                                    REFERENCES CITA_COAR(ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA),
    CONSTRAINT MEDICO_CONSULTA_COAR_FK FOREIGN KEY (ID_MEDICO) REFERENCES MEDICO_COAR(ID_MEDICO),
    CONSTRAINT CONSULCOAR_CONSUL_COAR_FK FOREIGN KEY (ID_CONSULTORIO) REFERENCES CONSULTORIO_COAR(ID_CONSULTORIO),
    CONSTRAINT TIPOCONSUL_CONSUL_COAR_FK FOREIGN KEY (ID_TIPO_CONSULTA) REFERENCES TIPO_CONSULTA_COAR(ID_TIPO_CONSULTA) 
);

SELECT * FROM CONSULTA_COAR;

-- Insertar datos en la tabla CONSULTA_COAR
INSERT INTO CONSULTA_COAR VALUES(3,2,'00000001',5,5,1,'00000001','04/05/2022');
INSERT INTO CONSULTA_COAR VALUES(2,2,'00000002',3,2,4,'00000002','03/05/2022');
INSERT INTO CONSULTA_COAR VALUES(1,3,'00000003',4,1,2,'00000003','02/05/2022');
INSERT INTO CONSULTA_COAR VALUES(5,4,'00000004',5,3,3,'00000004','30/04/2022');
INSERT INTO CONSULTA_COAR VALUES(4,1,'00000005',3,4,5,'00000005','27/04/2022');

COMMIT;

-- Tabla TIPO_ANALISIS_COAR
CREATE TABLE TIPO_ANALISIS_COAR(
    ID_TIPO_ANALISIS NUMBER(2) CONSTRAINT TIPO_ANALISIS_COAR_PK PRIMARY KEY,
    DESCRIPCION VARCHAR2(100) CONSTRAINT TIPO_ANALISIS_COAR_DES_NN NOT NULL
);

SELECT * FROM TIPO_ANALISIS_COAR;

-- Insertar datos en la tabla TIPO_ANALISIS_COAR
INSERT INTO TIPO_ANALISIS_COAR VALUES(1,'BIOMETRIA HEMATICA');
INSERT INTO TIPO_ANALISIS_COAR VALUES(2,'EXAMEN GENERAL DE ORINA');
INSERT INTO TIPO_ANALISIS_COAR VALUES(3,'EXAMENES ANTIDOPING');
INSERT INTO TIPO_ANALISIS_COAR VALUES(4,'MARCADORES VIRALES');
INSERT INTO TIPO_ANALISIS_COAR VALUES(5,'PRUEBA ELISA');

COMMIT;


-- Tabla de relacion ANALISIS_CLINICO_COAR
CREATE TABLE ANALISIS_CLINICO_COAR(
    ID_PACIENTE NUMBER(5),
    ID_ASISTENTE NUMBER(5),
    FOLIO_CITA CHAR(8),
    ID_MEDICO NUMBER(5),
    ID_CONSULTORIO NUMBER(2),
    ID_TIPO_CONSULTA NUMBER(2),
    FOLIO_CONSULTA CHAR(8),
    ID_TIPO_ANALISIS NUMBER(2),
    FOLIO_ANALISIS CHAR(8),
    FECHA DATE CONSTRAINT ANALI_CLINI_COAR_FEC_NN NOT NULL, 
    CONSTRAINT ANALI_CLINI_COAR_PK PRIMARY KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                            ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA, ID_TIPO_ANALISIS, 
                                            FOLIO_ANALISIS),
    CONSTRAINT CONSUL_ANALIS_CLINI_COAR_FK FOREIGN KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                        ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA) 
                                            REFERENCES CONSULTA_COAR(ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                                     ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA),
    CONSTRAINT TACOAR_ANALIS_CLINI_COAR_FK FOREIGN KEY (ID_TIPO_ANALISIS) REFERENCES TIPO_ANALISIS_COAR(ID_TIPO_ANALISIS)                                                                 
);

SELECT * FROM ANALISIS_CLINICO_COAR;

-- Insertar datos en la tabla ANALISIS_CLINICO_COAR
INSERT INTO ANALISIS_CLINICO_COAR VALUES(3,2,'00000001',5,5,1,'00000001', 2,'00000001','08/05/2022');
INSERT INTO ANALISIS_CLINICO_COAR VALUES(2,2,'00000002',3,2,4,'00000002', 2,'00000002','06/05/2022');
INSERT INTO ANALISIS_CLINICO_COAR VALUES(1,3,'00000003',4,1,2,'00000003', 3,'00000003','05/05/2022');
INSERT INTO ANALISIS_CLINICO_COAR VALUES(5,4,'00000004',5,3,3,'00000004', 1,'00000004','04/05/2022');
INSERT INTO ANALISIS_CLINICO_COAR VALUES(4,1,'00000005',3,4,5,'00000005', 5,'00000005','02/05/2022');

COMMIT;

-- Tabla MEDICAMENTO_COAR
CREATE TABLE MEDICAMENTO_COAR(
    ID_MEDICAMENTO NUMBER(3) CONSTRAINT MEDICAMENTO_COAR_PK PRIMARY KEY,
    NOMBRE VARCHAR2(100) CONSTRAINT MEDICAMENTO_COAR_NOM_NN NOT NULL,
    CANTIDAD NUMBER(3) CONSTRAINT MEDICAMENTO_COAR_CAN_NN NOT NULL,
    PRECIO NUMBER(6,2) CONSTRAINT MEDICAMENTO_COAR_PRE_NN NOT NULL
);

SELECT * FROM MEDICAMENTO_COAR;

-- Insertar datos en la tabla MEDICAMENTO_COAR
INSERT INTO MEDICAMENTO_COAR VALUES(1,'PARACETAMOL, 500MG',50,30.00);
INSERT INTO MEDICAMENTO_COAR VALUES(2,'ASPIRINA, 300MG',120,50.00);
INSERT INTO MEDICAMENTO_COAR VALUES(3,'AMOXICILINA, 500MG',200,100.00);
INSERT INTO MEDICAMENTO_COAR VALUES(4,'OMEPRAZOL, 400MG',70,40.00);
INSERT INTO MEDICAMENTO_COAR VALUES(5,'CIPROFLOXACINA, 500MG',100,60.00);

COMMIT;

-- Tabla de relacion RECETA_COAR
CREATE TABLE RECETA_COAR(
    ID_PACIENTE NUMBER(5),
    ID_ASISTENTE NUMBER(5),
    FOLIO_CITA CHAR(8),
    ID_MEDICO NUMBER(5),
    ID_CONSULTORIO NUMBER(2),
    ID_TIPO_CONSULTA NUMBER(2),
    FOLIO_CONSULTA CHAR(8),
    ID_MEDICAMENTO NUMBER(3),
    FOLIO_RECETA CHAR(8),
    DESCRIPCION VARCHAR2(100) CONSTRAINT RECETA_COAR_DES_NN NOT NULL,
    FECHA DATE CONSTRAINT RECETA_COAR_FEC_NN NOT NULL,
    CONSTRAINT RECETA_COAR_PK PRIMARY KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                            ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA, ID_MEDICAMENTO, 
                                            FOLIO_RECETA),
    CONSTRAINT CONSUL_RECETA_COAR_FK FOREIGN KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                  ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA) 
                                                  REFERENCES CONSULTA_COAR(ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                                           ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA),
    CONSTRAINT MEDICAM_RECETA_COAR_FK FOREIGN KEY (ID_MEDICAMENTO) REFERENCES MEDICAMENTO_COAR(ID_MEDICAMENTO)                                                                                                                                                                                                                                                     
);

SELECT * FROM RECETA_COAR;

-- Insertar datos en la tabla RECETA_COAR
INSERT INTO RECETA_COAR VALUES(3,2,'00000001',5,5,1,'00000001',2,'00000001','1 TABETA CADA 8 HORAS','08/05/2022');
INSERT INTO RECETA_COAR VALUES(2,2,'00000002',3,2,4,'00000002',2,'00000002','TOMAR 1 TABLETA CADA 5 HORAS','06/05/2022');
INSERT INTO RECETA_COAR VALUES(1,3,'00000003',4,1,2,'00000003',3,'00000003','1 TABLETA CADA 8 HORAS','05/05/2022');
INSERT INTO RECETA_COAR VALUES(5,4,'00000004',5,3,3,'00000004',1,'00000004','1 TABLETA CADA 6 HORAS','04/05/2022');
INSERT INTO RECETA_COAR VALUES(4,1,'00000005',3,4,5,'00000005',5,'00000005','1 TABLETA CADA 8 HORAS','02/05/2022');

-- Actualizar datos de la tabla RECETA_COAR
UPDATE RECETA_COAR SET DESCRIPCION = '1 TABLETA CADA 8 HORAS' WHERE 
                                                            ID_PACIENTE = 3 AND 
                                                            ID_ASISTENTE = 2 AND 
                                                            FOLIO_CITA = '00000001' AND 
                                                            ID_MEDICO = 5 AND 
                                                            ID_CONSULTORIO = 5 AND 
                                                            ID_TIPO_CONSULTA = 1 AND 
                                                            FOLIO_CONSULTA = '00000001' AND 
                                                            ID_MEDICAMENTO = 2 AND 
                                                            FOLIO_RECETA = '00000001';
                                                            
SELECT * FROM RECETA_COAR;

COMMIT;

-- Tabla CUARTO_COAR
CREATE TABLE CUARTO_COAR(
   ID_CUARTO NUMBER(3) CONSTRAINT CUARTO_COAR_PK PRIMARY KEY,
   DESCRIPCION VARCHAR2(100) CONSTRAINT CUARTO_COAR_DES_NN NOT NULL
);

SELECT * FROM CUARTO_COAR;

-- Insertar datos en la tabla CUARTO_COAR
INSERT INTO CUARTO_COAR VALUES(1,'CUARTO GENERAL');
INSERT INTO CUARTO_COAR VALUES(2,'CUARTO DE URGENCIA');
INSERT INTO CUARTO_COAR VALUES(3,'SALA PARA VISITAS');
INSERT INTO CUARTO_COAR VALUES(4,'CUARTO DE TERAPIA INTENSIVA');
INSERT INTO CUARTO_COAR VALUES(5,'QUIROFANO');

COMMIT;

-- Tabla ENFERMERA_COAR
CREATE TABLE ENFERMERA_COAR(
    ID_ENFERMERA NUMBER(5) CONSTRAINT ENFERMERA_COAR_PK PRIMARY KEY,
    APATERNO VARCHAR2(50) CONSTRAINT ENFERMERA_COAR_APA_NN NOT NULL,
    AMATERNO VARCHAR2(50),
    NOMBRE VARCHAR2(50) CONSTRAINT ENFERMERA_COAR_NOM_NN NOT NULL,
    EMAIL VARCHAR2(50) CONSTRAINT ENFERMERA_COAR_EMA_NN NOT NULL,
    TELEFONO VARCHAR2(50) CONSTRAINT ENFERMERA_COAR_TEL_NN NOT NULL
);

SELECT * FROM ENFERMERA_COAR;

-- Insertar datos en la tabla ENFERMERA_COAR
INSERT INTO ENFERMERA_COAR VALUES(1,'GARCIA', 'RODRIGUEZ', 'MARIA', 'MARIA@GMAIL.COM', '4929246455');
INSERT INTO ENFERMERA_COAR VALUES(2,'RUIZ', 'ALVAREZ', 'ANA', 'ANA@GMAIL.COM', '4929240274');
INSERT INTO ENFERMERA_COAR VALUES(3,'DIAZ', 'GONZALEZ', 'FATIMA', 'FATI@GMAIL.COM', '4929246900');
INSERT INTO ENFERMERA_COAR VALUES(4,'OLVERA', 'MORALES', 'JIMENA', 'JIMENA@GMAIL.COM', '4929269183');
INSERT INTO ENFERMERA_COAR VALUES(5,'FLORES', 'ROBLES', 'NATALIA', 'NAT@GMAIL.COM', '4923079055');

COMMIT;

-- Tabla de relacione HOSPITALIZACION_COAR
CREATE TABLE HOSPITALIZACION_COAR(  
    ID_PACIENTE NUMBER(5),
    ID_ASISTENTE NUMBER(5),
    FOLIO_CITA CHAR(8),
    ID_MEDICO NUMBER(5),
    ID_CONSULTORIO NUMBER(2),
    ID_TIPO_CONSULTA NUMBER(2),
    FOLIO_CONSULTA CHAR(8),
    ID_ENFERMERA NUMBER(5),
    ID_CUARTO NUMBER(3),
    FOLIO_HOSPI CHAR(8),
    DESCRIPCION VARCHAR2(100) CONSTRAINT HOSPI_COAR_DES_NN NOT NULL,
    FECHA_INGRESO DATE CONSTRAINT HOSPITALIZACION_COAR_FECI_NN NOT NULL,
    FECHA_EGRESO DATE CONSTRAINT HOSPITALIZACION_COAR_FECE_NN NOT NULL,
    CONSTRAINT HOSPI_COAR_PK PRIMARY KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                        ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA, 
                                        ID_ENFERMERA, ID_CUARTO, FOLIO_HOSPI),
    CONSTRAINT CONCOAR_HOSPI_COAR_FK FOREIGN KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                  ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA) 
                                                  REFERENCES CONSULTA_COAR(ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                                           ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA),
    CONSTRAINT ENFER_HOSPI_COAR_FK FOREIGN KEY (ID_ENFERMERA) REFERENCES ENFERMERA_COAR(ID_ENFERMERA),
    CONSTRAINT CUAR_HOSPI_COAR_FK FOREIGN KEY (ID_CUARTO) REFERENCES CUARTO_COAR(ID_CUARTO)                                                                      
);

SELECT * FROM HOSPITALIZACION_COAR;

-- Insertar datos en la tabla HOSPITALIZACION_COAR
INSERT INTO HOSPITALIZACION_COAR VALUES(3,2,'00000001',5,5,1,'00000001',1,1,'00000001','HOSPITALIZACION POR COVID-19','20/04/2022','30/04/2022');
INSERT INTO HOSPITALIZACION_COAR VALUES(2,2,'00000002',3,2,4,'00000002',2,1,'00000002','HOSPITALIZACION POR FRACTURA','02/05/2022','05/05/2022');
INSERT INTO HOSPITALIZACION_COAR VALUES(1,3,'00000003',4,1,2,'00000003',3,2,'00000003','HOSPITALIZACION POR HEMORRAGIA','10/05/2022','15/05/2022');
INSERT INTO HOSPITALIZACION_COAR VALUES(5,4,'00000004',5,3,3,'00000004',1,1,'00000004','HOSPITALIZACION POR COVID-19','01/05/2022','10/05/2022');
INSERT INTO HOSPITALIZACION_COAR VALUES(4,1,'00000005',3,4,5,'00000005',5,5,'00000005','CIRUGIA DE EMERGENCIA','20/05/2022','30/05/2022');

COMMIT;

-- Tabla de relacione PAGO_CONSULTA_COAR
CREATE TABLE PAGO_CONSULTA_COAR(
    ID_PACIENTE NUMBER(5),
    ID_ASISTENTE NUMBER(5),
    FOLIO_CITA CHAR(8),
    ID_MEDICO NUMBER(5),
    ID_CONSULTORIO NUMBER(2),
    ID_TIPO_CONSULTA NUMBER(2),
    FOLIO_CONSULTA CHAR(8),
    FOLIO_PAGO CHAR(8),
    FECHA DATE CONSTRAINT PAGO_COAR_FEC_NN NOT NULL,
    SUBTOTAL NUMBER(8,2) CONSTRAINT PAGO_COAR_SUB_NN NOT NULL,
    CONSTRAINT PAGO_COAR_PK PRIMARY KEY (FOLIO_PAGO),
    CONSTRAINT CONSULT_PAGOC_COAR_FK FOREIGN KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                  ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA) 
                                    REFERENCES CONSULTA_COAR(ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                             ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA)
);

SELECT * FROM PAGO_CONSULTA_COAR;

-- Insertar datos en la tabla PAGO_CONSULTA_COAR
INSERT INTO PAGO_CONSULTA_COAR VALUES(3,2,'00000001',5,5,1,'00000001','00000001','10/05/2022',500.00);
INSERT INTO PAGO_CONSULTA_COAR VALUES(2,2,'00000002',3,2,4,'00000002','00000002','02/05/2022',3000.00);
INSERT INTO PAGO_CONSULTA_COAR VALUES(1,3,'00000003',4,1,2,'00000003','00000003','29/04/2022',1000.00);
INSERT INTO PAGO_CONSULTA_COAR VALUES(5,4,'00000004',5,3,3,'00000004','00000004','02/05/2022',2500.00);
INSERT INTO PAGO_CONSULTA_COAR VALUES(4,1,'00000005',3,4,5,'00000005','00000005','20/05/2022',5000.00);

COMMIT;

-- Tabla de relacione EXPEDIENTE_COAR
CREATE TABLE EXPEDIENTE_COAR(
    ID_PACIENTE NUMBER(5),
    ID_ASISTENTE NUMBER(5),
    FOLIO_CITA CHAR(8),
    ID_MEDICO NUMBER(5),
    ID_CONSULTORIO NUMBER(2),
    ID_TIPO_CONSULTA NUMBER(2),
    FOLIO_CONSULTA CHAR(8),
    ID_EXPEDIENTE NUMBER(5),
    OBSERVACIONES VARCHAR2(100) CONSTRAINT EXP_COAR_OBS_NN NOT NULL,
    ALERGIAS VARCHAR2(100) DEFAULT 'SIN ALERGIAS',
    FECHA DATE CONSTRAINT EXP_COAR_FEC_NN NOT NULL,
    CONSTRAINT EXP_COAR_PK PRIMARY KEY (ID_EXPEDIENTE),
    CONSTRAINT CONSULT_EXP_COAR_FK FOREIGN KEY (ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                  ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA) 
                                    REFERENCES CONSULTA_COAR(ID_PACIENTE, ID_ASISTENTE, FOLIO_CITA, ID_MEDICO, 
                                                             ID_CONSULTORIO, ID_TIPO_CONSULTA, FOLIO_CONSULTA)
);

SELECT * FROM EXPEDIENTE_COAR;

-- Insertar datos en la tabla EXPEDIENTE_COAR
INSERT INTO EXPEDIENTE_COAR VALUES(3,2,'00000001',5,5,1,'00000001',1,'PERFECTO ESTADO DE SALUD','SIN ALERGIAS','20/04/2022');
INSERT INTO EXPEDIENTE_COAR VALUES(2,2,'00000002',3,2,4,'00000002',2,'PERFECTO ESTADO DE SALUD','SIN ALERGIAS','02/05/2022');
INSERT INTO EXPEDIENTE_COAR VALUES(1,3,'00000003',4,1,2,'00000003',3,'EL PACIENTE SUFRE DE PROBLEMAS RESPIRATORIOS','ALERGIA AL POLEN','29/04/2022');
INSERT INTO EXPEDIENTE_COAR VALUES(5,4,'00000004',5,3,3,'00000004',4,'PERFECTO ESTADO DE SALUD','SIN ALERGIAS','04/05/2022');
INSERT INTO EXPEDIENTE_COAR VALUES(4,1,'00000005',3,4,5,'00000005',5,'PERFECTO ESTADO DE SALUD','SIN ALERGIAS','20/05/2022');

COMMIT;